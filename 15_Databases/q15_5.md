## Question 15.5

What is Denormalization? Explain the pros and cons.

## Solution

非正規化はテーブルに冗長性をもたせてデータベースを最適化する手法。これにより、RDB における結合コストを下げることができる。

対して正規化はデータを論理的にテーブルで分割し冗長性を最小限に抑えようとする。DB内にて各種データが一箇所にのみ存在するようにする。

ex. 学科テーブルと教師テーブルが正規化されて分割されている場合、教師の氏名を含んだすべての学科リストが必要になった場合は結合が必要。ただ、教師の氏名が変更になった場合の修正箇所は一箇所でよい。

* 非正規化の短所
    * データの更新・追加のコストが大きい
    * データの更新・追加を行うコードを書くのが比較的難しい
    * データの整合性の取れない可能性がある。
    * データが冗長なので保存スペースが余計に必要になる
* 非正規化の長所
    * 結合操作が少ないのでデータの読み込みが速い
    * 操作するテーブルが少ないのでクエリが単純である（バグも少なくなる）

[非正規化](https://www.accessdbstudy.net/entry/20140910/p1)
```text
正規化を進める主な目的は、データの追加・更新・削除時の問題発生を防ぐことにあります。
 
よって、データの追加・更新・削除を行う必要がないテーブルについては正規化を進める必要性も特にないということになります。

具体的な例としては、テーブルそのものを他のシステムからインポートして専ら検索やクエリのデータソース用としてのみ用いるような場合が挙げられます。

このような場合はインポートにより得られたテーブルを正規化する必要性はありません。

また、データの追加・更新・削除があってもその影響を受けない部分については、あえて正規化しないことが考えられます。

また、正規化を進めると必然的にテーブルが分割されていきますが、テーブルが細分化されていく関係上、必要なクエリの作成が難しくなったりクエリの実行に時間がかかるようになる場合があります。

それらが許容できない場合、データの追加、更新、削除時の問題をあえて許容し（あるいはデータマクロなどでチェックすることとして）非正規形のまま運用するということが考えられます。
```

